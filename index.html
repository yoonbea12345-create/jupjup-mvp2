<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>줍줍 - 결제 비서 MVP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 앱 아이콘 -->
  <link rel="icon" type="image/png" href="logo1.png" />
  <link rel="apple-touch-icon" href="logo1.png" />

  <style>
    :root{
      --bg1:#ffcc00;
      --bg2:#ffe680;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --shadow: 0 8px 18px rgba(0,0,0,0.12);
      --radius: 18px;
      --accent:#ff9900;
      --line: rgba(0,0,0,0.08);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 420px;
      padding: 24px;
      box-sizing: border-box;
    }

    .panel{
      background: rgba(255,255,255,0.75);
      backdrop-filter: blur(6px);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    /* 헤더 */
    .app-header{
      margin-bottom: 14px;
    }
    .logo-wrap{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .header-logo{
      width: 40px;
      height: 40px;
      object-fit: contain;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
    }
    .app-name{
      font-size: 20px;
      font-weight: 900;
      color: var(--text);
      letter-spacing: -0.2px;
    }
    .subtitle{
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
      line-height: 1.4;
    }

    /* QR 자동 업종 안내 */
    .confirm-box{
      background: rgba(255,255,255,0.85);
      border-radius: 14px;
      padding: 12px 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      margin: 12px 0 10px;
      display:none;
    }
    .confirm-title{
      font-weight: 900;
      margin: 0 0 6px;
      color: var(--text);
      font-size: 14px;
    }
    .confirm-desc{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.45;
    }
    .top-row{
      display:flex;
      gap: 10px;
      margin-top: 10px;
    }

    label{
      display:block;
      margin-top: 12px;
      margin-bottom: 6px;
      font-size: 13px;
      color: var(--text);
      font-weight: 800;
    }

    select, button {
      width: 100%;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid var(--line);
      font-size: 16px;
      box-sizing: border-box;
      background: white;
    }

    button {
      margin-top: 16px;
      background-color: var(--card);
      border: none;
      font-weight: 900;
      box-shadow: 0 6px 12px rgba(0,0,0,0.10);
      cursor: pointer;
      transition: transform 0.08s ease;
    }
    button:active { transform: scale(0.98); }

    .ghost-btn{
      flex:1;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.88);
      font-weight: 900;
      cursor:pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      margin-top: 0;
    }

    #result {
      margin-top: 18px;
      padding: 16px;
      background: rgba(255,255,255,0.9);
      border-radius: 16px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.10);
      line-height: 1.6;
      white-space: pre-line;
    }

    .highlight{
      color: var(--accent);
      font-weight: 900;
    }
    .reason{
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
      line-height: 1.55;
    }

    .pulse {
      outline: 3px solid rgba(255,153,0,0.35);
      box-shadow: 0 0 0 6px rgba(255,153,0,0.18);
      transition: box-shadow 0.2s ease;
    }

    /* 스플래시 */
    .splash{
      position: fixed;
      inset: 0;
      background: #FFCC00;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .splash-inner{
      text-align: center;
      padding: 24px;
    }
    .splash-logo{
      width: 220px;
      max-width: 75vw;
      height: auto;
      display: block;
      margin: 0 auto 14px;
      filter: drop-shadow(0 12px 24px rgba(0,0,0,0.18));
    }
    .splash-title{
      margin: 0;
      font-size: 28px;
      font-weight: 900;
      color: #1f2937;
      letter-spacing: -0.3px;
    }
    .splash-tagline{
      margin: 8px 0 0;
      font-size: 14px;
      color: rgba(31,41,55,0.78);
      font-weight: 700;
    }
    .splash-fadeout{
      animation: fadeOut 0.35s ease forwards;
    }
    @keyframes fadeOut{
      to { opacity: 0; visibility: hidden; }
    }

    /* QR 링크 박스(옵션: qr.html 대체용) */
    details{
      margin-top: 16px;
      background: rgba(255,255,255,0.85);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px 14px;
    }
    summary{
      cursor: pointer;
      font-weight: 900;
      color: var(--text);
    }
    .qr-links{
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
      line-height: 1.6;
      word-break: break-all;
    }
    .qr-links b{ color: var(--text); }
  </style>
</head>

<body>
  <!-- 스플래시 -->
  <div class="splash" id="splash">
    <div class="splash-inner">
      <img src="logo2.png" alt="줍줍 스플래시" class="splash-logo" />
      <h1 class="splash-title">줍줍</h1>
      <p class="splash-tagline">나만의 결제 비서</p>
    </div>
  </div>

  <div class="container">
    <div class="panel">
      <header class="app-header">
        <div class="logo-wrap">
          <img src="logo3.png" alt="줍줍 로고" class="header-logo" />
          <div class="app-name">줍줍</div>
        </div>
        <div class="subtitle">결제 직전, 가장 유리한 결제수단을 추천합니다.</div>
      </header>

      <!-- QR 자동 안내 -->
      <div class="confirm-box" id="confirmBox">
        <p class="confirm-title" id="confirmTitle">선택된 업종이 맞나요?</p>
        <p class="confirm-desc">
          QR코드를 통해 업종을 자동 선택해 드렸습니다.<br>
          틀렸다면 아래 버튼 또는 업종 선택에서 수정해 주세요.
        </p>
        <div class="top-row">
          <button class="ghost-btn" type="button" onclick="scrollToCategory()">업종 변경</button>
        </div>
      </div>

      <label for="cardCompany">카드사</label>
      <select id="cardCompany">
        <option value="신한카드">신한카드</option>
        <option value="국민카드">국민카드</option>
        <option value="현대카드">현대카드</option>
      </select>

      <label for="performance">전월 실적</label>
      <select id="performance">
        <option value="30">전월 30만원 이상</option>
        <option value="50">전월 50만원 이상</option>
        <option value="100">전월 100만원 이상</option>
      </select>

      <label for="category">결제 업종</label>
      <select id="category">
        <option value="음식점">음식점</option>
        <option value="카페">카페</option>
        <option value="편의점">편의점</option>
      </select>

      <button type="button" onclick="recommendCard()">추천받기</button>

      <div id="result">결제 전 추천 결과가 표시됩니다.</div>

      <!-- qr.html을 없앨 거라, 필요하면 여기서 QR 링크를 확인할 수 있게 옵션 제공 -->
      <details>
        <summary>업종별 QR 링크 보기(생성용)</summary>
        <div class="qr-links" id="qrLinks"></div>
      </details>
    </div>
  </div>

  <script>
    // 스플래시 제거
    window.addEventListener("load", () => {
      const splash = document.getElementById("splash");
      setTimeout(() => {
        splash.classList.add("splash-fadeout");
        setTimeout(() => splash.remove(), 380);
      }, 900);
    });

    // 카드 혜택 데이터(샘플)
    const cards = [
      { name: "신한 딥드림", company: "신한카드", categories: ["카페","음식점"], benefitType: "할인", discount: 10, minPerformance: 30, monthlyLimit: 10000 },
      { name: "국민 청춘대로", company: "국민카드", categories: ["음식점"], benefitType: "캐시백", discount: 15, minPerformance: 50, monthlyLimit: 15000 },
      { name: "현대 Zero", company: "현대카드", categories: ["카페","편의점","음식점"], benefitType: "할인", discount: 5, minPerformance: 0, monthlyLimit: 0 }
    ];

    function recommendCard() {
      const company = document.getElementById("cardCompany").value;
      const performance = Number(document.getElementById("performance").value);
      const category = document.getElementById("category").value;

      let bestCard = null;
      let bestScore = -1;
      let reasons = [];

      for (const card of cards) {
        let score = 0;
        let temp = [];

        if (card.company === company) { score += 20; temp.push("보유 카드사와 일치"); }
        if (card.categories.includes(category)) { score += 50; temp.push(`${category} 업종 혜택 적용`); }
        if (performance >= card.minPerformance) { score += card.discount; temp.push("전월 실적 조건 충족"); }
        else { temp.push("전월 실적 미충족(혜택 제한 가능)"); }

        if (score > bestScore) {
          bestScore = score;
          bestCard = card;
          reasons = temp;
        }
      }

      if (!bestCard) {
        document.getElementById("result").innerText = "추천할 카드가 없습니다.";
        return;
      }

      const limitText = bestCard.monthlyLimit ? `${bestCard.monthlyLimit.toLocaleString()}원` : "제한 없음";

      document.getElementById("result").innerHTML =
        `<div><span class="highlight">추천 카드: ${bestCard.name}</span></div>
         <div>예상 혜택: ${bestCard.discount}% ${bestCard.benefitType}</div>
         <div>월 혜택 한도: ${limitText}</div>
         <div class="reason">✔ ${reasons.join("<br>✔ ")}</div>`;
    }

    // QR 자동 업종 선택 + 안내 박스 노출
    const params = new URLSearchParams(window.location.search);
    const autoCategory = params.get("category");
    const from = params.get("from"); // from=qr이면 QR 진입으로 간주

    const confirmBox = document.getElementById("confirmBox");
    const confirmTitle = document.getElementById("confirmTitle");

    // 기본: QR이 아니라면 안내 박스 숨김
    confirmBox.style.display = "none";

    if (autoCategory) {
      const decoded = decodeURIComponent(autoCategory);
      const categorySelect = document.getElementById("category");

      // 값이 있는 경우에만 세팅
      for (const opt of categorySelect.options) {
        if (opt.value === decoded || opt.text === decoded) {
          categorySelect.value = opt.value;
          break;
        }
      }
      if (confirmTitle) confirmTitle.innerText = `선택된 업종이 '${decoded}'(이)가 맞나요?`;
    }

    // QR로 들어왔거나 category 파라미터가 있으면 안내 박스 표시
    if (from === "qr" || autoCategory) {
      confirmBox.style.display = "block";
    }

    function scrollToCategory() {
      const el = document.getElementById("category");
      el.scrollIntoView({ behavior: "smooth", block: "center" });
      el.focus();
      el.classList.add("pulse");
      setTimeout(() => el.classList.remove("pulse"), 800);
    }

    // (옵션) index 하나로 QR 링크까지 보여주기
    function buildQRLinks() {
      const base = location.origin + location.pathname; // .../index.html
      const cafe = `${base}?category=${encodeURIComponent("카페")}&from=qr`;
      const food = `${base}?category=${encodeURIComponent("음식점")}&from=qr`;
      const mart = `${base}?category=${encodeURIComponent("편의점")}&from=qr`;
      document.getElementById("qrLinks").innerHTML = `
        <div><b>카페</b>: ${cafe}</div>
        <div><b>음식점</b>: ${food}</div>
        <div><b>편의점</b>: ${mart}</div>
      `;
    }
    buildQRLinks();
  </script>
</body>
</html>






